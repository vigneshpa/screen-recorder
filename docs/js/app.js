(()=>{"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t){return 0===Object.keys(t).length}new Set;let a,s=!1;function u(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(){return t=" ",document.createTextNode(t);var t}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t){return""===t?null:+t}function m(t,e){t.value=null==e?"":e}function g(t){a=t}new Set;const b=[],y=[],k=[],w=[],v=Promise.resolve();let x=!1;function _(t){k.push(t)}const S=new Set;let C=0;function E(){const t=a;do{for(;C<b.length;){const t=b[C];C++,g(t),A(t.$$)}for(g(null),b.length=0,C=0;y.length;)y.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];S.has(e)||(S.add(e),e())}k.length=0}while(b.length);for(;w.length;)w.pop()();x=!1,S.clear(),g(t)}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const T=new Set;let M;function L(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function O(c,i,u,d,f,h,p,$=[-1]){const m=a;g(c);const y=c.$$={fragment:null,ctx:null,props:h,update:t,not_equal:f,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:n(),dirty:$,skip_bound:!1,root:i.target||m.$$.root};p&&p(y.root);let k=!1;if(y.ctx=u?u(c,i.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return y.ctx&&f(y.ctx[t],y.ctx[t]=o)&&(!y.skip_bound&&y.bound[t]&&y.bound[t](o),k&&function(t,e){-1===t.$$.dirty[0]&&(b.push(t),x||(x=!0,v.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(c,t)),e})):[],y.update(),k=!0,o(y.before_update),y.fragment=!!d&&d(y.ctx),i.target){if(i.hydrate){s=!0;const t=(C=i.target,Array.from(C.childNodes));y.fragment&&y.fragment.l(t),t.forEach(l)}else y.fragment&&y.fragment.c();i.intro&&((w=c.$$.fragment)&&w.i&&(T.delete(w),w.i(S))),function(t,n,c,i){const{fragment:a,on_mount:s,on_destroy:u,after_update:l}=t.$$;a&&a.m(n,c),i||_((()=>{const n=s.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(_)}(c,i.target,i.anchor,i.customElement),s=!1,E()}var w,S,C;g(m)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(M=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){L(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!i(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function j(e){let n,r,c,i,a,s,g,b,y,k,w,v,x,_,S,C,E,A,T,M,L,O,j,D,R,q;return{c(){n=d("h1"),n.textContent="Hello",r=f(),c=d("button"),c.textContent="Select",i=f(),a=d("button"),a.textContent="Record",s=f(),g=d("button"),g.textContent="Stop",b=d("br"),y=f(),k=d("input"),w=f(),v=d("label"),v.textContent="System Audio",x=d("br"),_=f(),S=d("input"),C=f(),E=d("label"),E.textContent="Audio from microphone",A=d("br"),T=f(),M=d("label"),M.textContent="Count down in seconds",L=f(),O=d("input"),j=f(),D=d("video"),p(k,"type","checkbox"),p(k,"id","sysAudio"),p(v,"for","sysAudio"),p(S,"type","checkbox"),p(S,"id","userAudio"),p(E,"for","userAudio"),p(M,"for","countdown"),p(O,"id","countdown"),p(O,"type","number"),p(D,"width","1000")},m(t,o){u(t,n,o),u(t,r,o),u(t,c,o),u(t,i,o),u(t,a,o),u(t,s,o),u(t,g,o),u(t,b,o),u(t,y,o),u(t,k,o),k.checked=e[3],u(t,w,o),u(t,v,o),u(t,x,o),u(t,_,o),u(t,S,o),S.checked=e[1],u(t,C,o),u(t,E,o),u(t,A,o),u(t,T,o),u(t,M,o),u(t,L,o),u(t,O,o),m(O,e[4]),u(t,j,o),u(t,D,o),e[15](D),R||(q=[h(c,"click",e[9]),h(a,"click",e[10]),h(g,"click",e[11]),h(k,"change",e[12]),h(S,"change",e[13]),h(O,"input",e[14])],R=!0)},p(t,[e]){8&e&&(k.checked=t[3]),2&e&&(S.checked=t[1]),16&e&&$(O.value)!==t[4]&&m(O,t[4])},i:t,o:t,d(t){t&&l(n),t&&l(r),t&&l(c),t&&l(i),t&&l(a),t&&l(s),t&&l(g),t&&l(b),t&&l(y),t&&l(k),t&&l(w),t&&l(v),t&&l(x),t&&l(_),t&&l(S),t&&l(C),t&&l(E),t&&l(A),t&&l(T),t&&l(M),t&&l(L),t&&l(O),t&&l(j),t&&l(D),e[15](null),R=!1,o(q)}}}function D(t,e,n){let o,r,c=null,i=null,a=null,s=!1,u=!0,l=5;async function d(){n(8,i=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0})),i.getVideoTracks()[0].addEventListener("ended",(t=>c?.stop()||p(t)))}let f=!1;function h(){if(!i)return alert("Select screen first");if(c)return alert("Already recording");if(f)return alert("Countdown already started");f=!0;const t=setInterval((()=>{0===n(4,l--,l)&&(async function(){if(!i)return alert("Select screen first");if(c)return alert("Already recording");r=new MediaStream,i.getVideoTracks().forEach((t=>r.addTrack(t)));{const t=new AudioContext,e=t.createMediaStreamDestination();0===i.getAudioTracks().length&&n(3,u=!1),u&&t.createMediaStreamSource(i).connect(e),s&&t.createMediaStreamSource(a).connect(e),(u||s)&&e.stream.getAudioTracks().forEach((t=>r.addTrack(t)))}n(2,c=new MediaRecorder(r)),c.start(),c.addEventListener("dataavailable",p)}(),clearInterval(t),n(4,l=5),f=!1)}),1e3)}async function p(t){if(f)return alert("Can't do anything while count down");const e=t.data;e&&window.open(URL.createObjectURL(e),"_blank","menubar=no,height=400,width=700"),r?.getTracks().forEach((t=>t.stop)),n(2,c=null),i?.getTracks().forEach((t=>t.stop())),n(8,i=null),n(1,s=!1),n(3,u=!0),n(4,l=5)}return t.$$.update=()=>{var e,r;2&t.$$.dirty&&(async t=>{if(!t)return a?.getTracks().forEach((t=>t.stop())),a=null,void n(1,s=!1);a=await navigator.mediaDevices.getUserMedia({audio:!0}),a||n(1,s=!1)})(s),257&t.$$.dirty&&(r=i,(e=o)&&(e.srcObject=r?new MediaStream(r.getVideoTracks()):null,r&&e.play()))},[o,s,c,u,l,d,h,p,i,()=>d(),()=>h(),t=>c?.stop()||p(t),function(){u=this.checked,n(3,u)},function(){s=this.checked,n(1,s)},function(){l=$(this.value),n(4,l)},function(t){y[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}const R=new class extends class{$destroy(){L(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!i(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),O(this,t,D,j,c,{})}}({target:document.body});window.app=R})();
//# sourceMappingURL=app.js.map