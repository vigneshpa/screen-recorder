var ht=Object.defineProperty;var pt=(s,t,e)=>t in s?ht(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var K=(s,t,e)=>(pt(s,typeof t!="symbol"?t+"":t,e),e);import{S as ve,i as _e,s as me,c as ze,e as v,a as E,b as h,d as C,f as u,g as Fe,l as N,u as Be,h as Je,j as He,t as Ke,k as W,m as P,n as A,r as Ge,o as q,p as vt,q as Ce,v as R,w as Qe,x as Ae,y as Me,z as $,A as re,B as ge,C as Xe,D as ie,E as x,F as le,G as ae,H as _t,I as ce,J as Ye,K as mt,L as je,M as gt}from"./vendor.5fc1bdd9.js";const wt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}};wt();function bt(s){let t,e,n,i,o,r,a,c,d,p,m;const w=s[4].default,f=ze(w,s,s[3],null);return{c(){t=v("div"),e=v("label"),f&&f.c(),n=E(),i=v("button"),i.textContent="-",o=E(),r=v("input"),a=E(),c=v("button"),c.textContent="+",h(e,"for",s[2]),h(e,"class","svelte-sfum2z"),h(i,"class","dec svelte-sfum2z"),h(r,"type","number"),h(r,"id",s[2]),h(r,"min",s[1]),h(r,"class","svelte-sfum2z"),h(c,"class","inc svelte-sfum2z"),h(t,"class","container svelte-sfum2z")},m(_,k){C(_,t,k),u(t,e),f&&f.m(e,null),u(t,n),u(t,i),u(t,o),u(t,r),Fe(r,s[0]),u(t,a),u(t,c),d=!0,p||(m=[N(i,"click",s[5]),N(r,"input",s[6]),N(c,"click",s[7])],p=!0)},p(_,[k]){f&&f.p&&(!d||k&8)&&Be(f,w,_,_[3],d?He(w,_[3],k,null):Je(_[3]),null),(!d||k&2)&&h(r,"min",_[1]),k&1&&Ke(r.value)!==_[0]&&Fe(r,_[0])},i(_){d||(W(f,_),d=!0)},o(_){P(f,_),d=!1},d(_){_&&A(t),f&&f.d(_),p=!1,Ge(m)}}}function kt(s,t,e){let{$$slots:n={},$$scope:i}=t,{value:o=0}=t,{min:r=0}=t,a=Math.floor(Math.random()*1e3)+"-number";const c=()=>e(0,o--,o);function d(){o=Ke(this.value),e(0,o),e(1,r)}const p=()=>e(0,o++,o);return s.$$set=m=>{"value"in m&&e(0,o=m.value),"min"in m&&e(1,r=m.min),"$$scope"in m&&e(3,i=m.$$scope)},s.$$.update=()=>{s.$$.dirty&3&&(e(0,o=Math.trunc(o)),o<r&&e(0,o=r))},[o,r,a,i,n,c,d,p]}class yt extends ve{constructor(t){super();_e(this,t,kt,bt,me,{value:0,min:1})}}async function Le(s=1e3){return new Promise(t=>setTimeout(()=>t(),s))}async function*St(s,t=1e3){for(let e=0;e<=s&&(yield s-e,s!==e);e++)await Le(t)}function Et(s,t){const e=document.createElement("a");e.hidden=!0;const n=URL.createObjectURL(t);e.href=n,e.download=s,document.body.append(e),e.click(),e.remove(),setTimeout(()=>URL.revokeObjectURL(n))}function Ct(s){let t="hiddenDownloader",e=document.getElementById(t);e===null&&(e=document.createElement("iframe"),e.id=t,e.style.display="none",document.body.appendChild(e)),e.src=s}const At=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function Mt(s,t,e){if(e=e||"application/octet-stream",!window.navigator.serviceWorker.controller)throw new Error("No service worker registered");const n=jt(t),i=[];i.push(["Content-Disposition",`attachment; filename="${s}"`]),i.push(["Content-Type",e]),i.push(["Connection","close"]),i.push(["Cache-Control","no-cache"]);try{window.navigator.serviceWorker.controller.postMessage({type:"streaming-downloads-response",filename:s,stream:n,headers:i,status:200},[n])}catch(o){console.warn(o);const r=Math.floor(Math.random()*10**5);window.navigator.serviceWorker.controller.postMessage({type:"streaming-downloads-response-chunked",filename:s,headers:i,id:r,status:200});const a=n.getReader();(function c(){a.read().then(({done:d,value:p})=>{d?window.navigator.serviceWorker.controller.postMessage({type:"streaming-downloads-response-stop",id:r}):(window.navigator.serviceWorker.controller.postMessage({type:"streaming-downloads-response-chunk",id:r,data:p}),c())})})()}setTimeout(()=>Ct("/screen-recorder/streaming-downloads/"+s),1e3)}function jt(s){let t;return new ReadableStream({start(){t=s.getReader()},async pull(e){const{value:n,done:i}=await t.read();i?e.close():e.enqueue(new Uint8Array(await n.arrayBuffer()))}})}class Lt extends window.EventTarget{constructor(t){super();K(this,"config");K(this,"recorder");K(this,"rStream");K(this,"aDest");K(this,"aCtx");K(this,"writer");K(this,"state");this.config=t,this.rStream=new MediaStream,this.recorder=new MediaRecorder(this.rStream,{mimeType:this.config.mime}),this.aCtx=new AudioContext,this.aDest=this.aCtx.createMediaStreamDestination(),this.state="idle"}async requestScreen(){const t=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.config.systemAudio});t.getVideoTracks().length<1&&this.throwError("Unable to get video"),t.getVideoTracks().forEach(e=>this.rStream.addTrack(e)),this.config.systemAudio&&(this.config.systemAudio=t.getAudioTracks().length>0),this.config.systemAudio&&this.aCtx.createMediaStreamSource(t).connect(this.aDest),this.recorder.addEventListener("stop",e=>setTimeout(n=>t.getTracks().forEach(i=>i.stop()),300)),t.getVideoTracks()[0].addEventListener("ended",()=>this.stop())}async requestMicrophone(){if(!this.config.microphone)return;const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.config.microphone=t.getAudioTracks().length>0,!!this.config.microphone&&(this.recorder.addEventListener("stop",e=>setTimeout(n=>t.getTracks().forEach(i=>i.stop()),300)),this.aCtx.createMediaStreamSource(t).connect(this.aDest))}async requestStreams(){return this.state!=="idle"&&this.throwError("Recorder is not idle"),await this.requestMicrophone(),await this.requestScreen(),(this.config.microphone||this.config.systemAudio)&&this.aDest.stream.getAudioTracks().forEach(t=>this.rStream.addTrack(t)),this.state="gotPermissions",this.dispatchEvent(new Event("gotPermissions")),this.rStream}saveStream(t="screencapture-"+new Date().toLocaleDateString().replaceAll("/","-")){if(this.state!=="gotPermissions"&&this.throwError("The recorder's state is invalid"),this.config.timeslice&&window.navigator.serviceWorker.controller){const e=this;let n,i;const o=new ReadableStream({start(r){n=a=>{r.enqueue(a),Le(e.config.timeslice).then(()=>{i&&(i(),i=null)})},e.recorder.addEventListener("dataavailable",async a=>{n(a.data)}),e.recorder.addEventListener("stop",a=>{Le(e.config.timeslice*2).then(()=>r.close()),e.state="stopped",e.dispatchEvent(new Event("stopped"))})},pull(){return new Promise(r=>{i=r,e.recorder.state==="recording"&&e.recorder.requestData()})},cancel(){e.stop()}});Mt(t+"."+this.config.ext,o,this.config.mime),this.recorder.start()}else this.recorder.addEventListener("dataavailable",e=>Et(t+"."+this.config.ext,e.data)),this.recorder.addEventListener("stop",e=>{this.state="stopped",this.dispatchEvent(new Event("stopped"))}),this.recorder.start();this.state="recording"}stop(){this.state==="recording"?this.recorder.stop():this.throwError("Cannot stop recording"),this.state="stopping",this.aCtx.close(),this.dispatchEvent(new Event("stopping"))}throwError(t){const e=new Error(t);this.state="error";const n=new Event("error");throw n.error=e,this.dispatchEvent(n),e}}function Rt(s){let t,e,n,i,o,r,a,c,d,p;const m=s[3].default,w=ze(m,s,s[2],null);return{c(){t=v("div"),e=v("label"),n=v("input"),i=E(),o=v("div"),r=E(),a=v("label"),w&&w.c(),h(n,"type","checkbox"),h(n,"id",s[1]),h(n,"class","svelte-r0ot5f"),h(o,"class","but svelte-r0ot5f"),h(e,"class","switch svelte-r0ot5f"),h(a,"for",s[1]),h(a,"class","txt svelte-r0ot5f"),h(t,"class","container svelte-r0ot5f")},m(f,_){C(f,t,_),u(t,e),u(e,n),n.checked=s[0],u(e,i),u(e,o),u(t,r),u(t,a),w&&w.m(a,null),c=!0,d||(p=N(n,"change",s[4]),d=!0)},p(f,[_]){_&1&&(n.checked=f[0]),w&&w.p&&(!c||_&4)&&Be(w,m,f,f[2],c?He(m,f[2],_,null):Je(f[2]),null)},i(f){c||(W(w,f),c=!0)},o(f){P(w,f),c=!1},d(f){f&&A(t),w&&w.d(f),d=!1,p()}}}function Tt(s,t,e){let{$$slots:n={},$$scope:i}=t,{value:o=!1}=t,r=Math.trunc(Math.random()*1e3)+"-switch";function a(){o=this.checked,e(0,o)}return s.$$set=c=>{"value"in c&&e(0,o=c.value),"$$scope"in c&&e(2,i=c.$$scope)},[o,r,i,n,a]}class Re extends ve{constructor(t){super();_e(this,t,Tt,Rt,me,{value:0})}}function Dt(s){let t,e,n,i,o;return{c(){t=v("div"),e=v("div"),n=v("div"),h(n,"class","innerdiv svelte-r167gc"),q(n,"recording",s[0]),h(e,"class","ring svelte-r167gc"),q(e,"recording",s[0]),h(t,"class","container svelte-r167gc")},m(r,a){C(r,t,a),u(t,e),u(e,n),i||(o=N(e,"click",function(){vt(s[1])&&s[1].apply(this,arguments)}),i=!0)},p(r,[a]){s=r,a&1&&q(n,"recording",s[0]),a&1&&q(e,"recording",s[0])},i:Ce,o:Ce,d(r){r&&A(t),i=!1,o()}}}function Ot(s,t,e){let{recording:n=!1}=t,{toogle:i=()=>{e(0,n=!n)}}=t;return s.$$set=o=>{"recording"in o&&e(0,n=o.recording),"toogle"in o&&e(1,i=o.toogle)},[n,i]}class qt extends ve{constructor(t){super();_e(this,t,Ot,Dt,me,{recording:0,toogle:1})}}function Nt(){const s=["webm","x-matroska","mp4","ogg"],t=[["av1","av01","vp10"],["vp9","vp09","vp9.0"],["h265","h.265","hevc"],["vp8","vp08","vp8.0"],["avc1","h264","h.264"],["theora"],["h263","h.263"],["mp4v"]],e=[["opus"],["aac"],["vorbis"],["mp4a"]],n=new Map;for(let i of s){if(!MediaRecorder.isTypeSupported("video/"+i))continue;const o=new Map;for(let r of t){const a=r.find(d=>MediaRecorder.isTypeSupported("video/"+i+';codecs="'+d+'"'));if(!a)continue;const c=[];for(let d of e){const p=d.find(m=>MediaRecorder.isTypeSupported("video/"+i+';codecs="'+a+","+m+'"'));!p||c.push(p)}o.set(a,c)}n.set(i,o)}return n}const Ze=new Map([["webm","webm"],["x-matroska","mkv"],["mp4","mp4"],["ogg","ogg"]]);function $e(s,t,e){const n=s.slice();return n[31]=t[e],n}function xe(s,t,e){const n=s.slice();return n[31]=t[e],n}function et(s,t,e){const n=s.slice();return n[31]=t[e],n}function tt(s){let t,e=s[31]+"",n,i,o=Ze.get(s[31])+"",r,a,c;return{c(){t=v("option"),n=R(e),i=R(" (*."),r=R(o),a=R(")"),t.__value=c=s[31],t.value=t.__value,h(t,"class","svelte-e1jdwr")},m(d,p){C(d,t,p),u(t,n),u(t,i),u(t,r),u(t,a)},p:Ce,d(d){d&&A(t)}}}function st(s){var i;let t,e=Array.from(((i=s[12].get(s[4]))==null?void 0:i.keys())||[]),n=[];for(let o=0;o<e.length;o+=1)n[o]=nt(xe(s,e,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Qe()},m(o,r){for(let a=0;a<n.length;a+=1)n[a].m(o,r);C(o,t,r)},p(o,r){var a;if(r[0]&4112){e=Array.from(((a=o[12].get(o[4]))==null?void 0:a.keys())||[]);let c;for(c=0;c<e.length;c+=1){const d=xe(o,e,c);n[c]?n[c].p(d,r):(n[c]=nt(d),n[c].c(),n[c].m(t.parentNode,t))}for(;c<n.length;c+=1)n[c].d(1);n.length=e.length}},d(o){Me(n,o),o&&A(t)}}}function nt(s){let t,e=s[31]+"",n,i;return{c(){t=v("option"),n=R(e),t.__value=i=s[31],t.value=t.__value,h(t,"class","svelte-e1jdwr")},m(o,r){C(o,t,r),u(t,n)},p(o,r){r[0]&16&&e!==(e=o[31]+"")&&Ae(n,e),r[0]&4112&&i!==(i=o[31])&&(t.__value=i,t.value=t.__value)},d(o){o&&A(t)}}}function ot(s){var i,o;let t,e=((o=(i=s[12])==null?void 0:i.get(s[4]))==null?void 0:o.get(s[5]))||[],n=[];for(let r=0;r<e.length;r+=1)n[r]=rt($e(s,e,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Qe()},m(r,a){for(let c=0;c<n.length;c+=1)n[c].m(r,a);C(r,t,a)},p(r,a){var c,d;if(a[0]&4144){e=((d=(c=r[12])==null?void 0:c.get(r[4]))==null?void 0:d.get(r[5]))||[];let p;for(p=0;p<e.length;p+=1){const m=$e(r,e,p);n[p]?n[p].p(m,a):(n[p]=rt(m),n[p].c(),n[p].m(t.parentNode,t))}for(;p<n.length;p+=1)n[p].d(1);n.length=e.length}},d(r){Me(n,r),r&&A(t)}}}function rt(s){let t,e=s[31]+"",n,i;return{c(){t=v("option"),n=R(e),t.__value=i=s[31],t.value=t.__value,h(t,"class","svelte-e1jdwr")},m(o,r){C(o,t,r),u(t,n)},p(o,r){r[0]&48&&e!==(e=o[31]+"")&&Ae(n,e),r[0]&4144&&i!==(i=o[31])&&(t.__value=i,t.value=t.__value)},d(o){o&&A(t)}}}function It(s){let t;return{c(){t=R("Record system audio")},m(e,n){C(e,t,n)},d(e){e&&A(t)}}}function Ut(s){let t;return{c(){t=R("Record from microphone")},m(e,n){C(e,t,n)},d(e){e&&A(t)}}}function Vt(s){let t;return{c(){t=R("Save video while recording (recomended)")},m(e,n){C(e,t,n)},d(e){e&&A(t)}}}function Wt(s){let t;return{c(){t=R("Countdown")},m(e,n){C(e,t,n)},d(e){e&&A(t)}}}function it(s){let t,e,n,i;return{c(){t=v("div"),e=R(s[9]),h(t,"class","counter svelte-e1jdwr")},m(o,r){C(o,t,r),u(t,e),i=!0},p(o,r){(!i||r[0]&512)&&Ae(e,o[9])},i(o){i||(ge(()=>{n||(n=Xe(t,Ye,{},!0)),n.run(1)}),i=!0)},o(o){n||(n=Xe(t,Ye,{},!1)),n.run(0),i=!1},d(o){o&&A(t),o&&n&&n.end()}}}function Pt(s){let t,e,n,i,o,r,a,c,d,p,m,w,f,_,k,ee,T,D,z,te,S,I,se,ue,U,ne,de,V,oe,fe,G,he,Q,b,F,B,J,we,Te,Y,H,be,De,pe,ke,Oe,Z=Array.from(s[12].keys()),M=[];for(let l=0;l<Z.length;l+=1)M[l]=tt(et(s,Z,l));let j=s[4]&&st(s),L=s[5]&&ot(s);function at(l){s[20](l)}let qe={$$slots:{default:[It]},$$scope:{ctx:s}};s[0]!==void 0&&(qe.value=s[0]),I=new Re({props:qe}),$.push(()=>re(I,"value",at));function ct(l){s[21](l)}let Ne={$$slots:{default:[Ut]},$$scope:{ctx:s}};s[1]!==void 0&&(Ne.value=s[1]),U=new Re({props:Ne}),$.push(()=>re(U,"value",ct));function ut(l){s[22](l)}let Ie={$$slots:{default:[Vt]},$$scope:{ctx:s}};s[2]!==void 0&&(Ie.value=s[2]),V=new Re({props:Ie}),$.push(()=>re(V,"value",ut));function dt(l){s[25](l)}let Ue={$$slots:{default:[Wt]},$$scope:{ctx:s}};s[3]!==void 0&&(Ue.value=s[3]),J=new yt({props:Ue}),$.push(()=>re(J,"value",dt));function ft(l){s[26](l)}let Ve={toogle:s[14]};s[8]!==void 0&&(Ve.recording=s[8]),H=new qt({props:Ve}),$.push(()=>re(H,"recording",ft));let y=s[10]&&it(s);return{c(){t=v("div"),e=v("video"),n=E(),i=v("div"),o=v("div"),r=v("div"),a=v("label"),c=R(`Container:
        `),d=v("select");for(let l=0;l<M.length;l+=1)M[l].c();p=E(),m=v("label"),w=R(`Video Codec:
        `),f=v("select"),j&&j.c(),_=E(),k=v("label"),ee=R(`Audio Codec:
        `),T=v("select"),L&&L.c(),D=E(),z=v("button"),z.textContent="Done",te=E(),S=v("div"),ie(I.$$.fragment),ue=E(),ie(U.$$.fragment),de=E(),ie(V.$$.fragment),fe=E(),G=v("button"),G.textContent="Select Screen",he=E(),Q=v("a"),Q.textContent="change video settings",b=v("br"),F=E(),B=v("div"),ie(J.$$.fragment),Te=E(),Y=v("div"),ie(H.$$.fragment),De=E(),y&&y.c(),e.muted=!0,h(e,"class","svelte-e1jdwr"),h(t,"class","vid svelte-e1jdwr"),h(d,"class","svelte-e1jdwr"),s[4]===void 0&&ge(()=>s[16].call(d)),h(a,"class","svelte-e1jdwr"),h(f,"class","svelte-e1jdwr"),s[5]===void 0&&ge(()=>s[17].call(f)),h(m,"class","svelte-e1jdwr"),h(T,"class","svelte-e1jdwr"),s[6]===void 0&&ge(()=>s[18].call(T)),h(k,"class","svelte-e1jdwr"),h(z,"class","svelte-e1jdwr"),h(r,"class","video-options svelte-e1jdwr"),q(r,"hidden",s[11]!=-1),h(G,"class","svelte-e1jdwr"),h(Q,"class","svelte-e1jdwr"),h(S,"class","options svelte-e1jdwr"),q(S,"hidden",s[11]!==0),h(B,"class","countdown svelte-e1jdwr"),q(B,"hidden",s[11]!==1),h(Y,"class","record svelte-e1jdwr"),q(Y,"hidden",s[11]!==2&&s[11]!==1),h(o,"class","pannel svelte-e1jdwr"),h(i,"class","overlay svelte-e1jdwr")},m(l,g){C(l,t,g),u(t,e),s[15](e),C(l,n,g),C(l,i,g),u(i,o),u(o,r),u(r,a),u(a,c),u(a,d);for(let X=0;X<M.length;X+=1)M[X].m(d,null);x(d,s[4]),u(r,p),u(r,m),u(m,w),u(m,f),j&&j.m(f,null),x(f,s[5]),u(r,_),u(r,k),u(k,ee),u(k,T),L&&L.m(T,null),x(T,s[6]),u(r,D),u(r,z),u(o,te),u(o,S),le(I,S,null),u(S,ue),le(U,S,null),u(S,de),le(V,S,null),u(S,fe),u(S,G),u(S,he),u(S,Q),u(S,b),u(o,F),u(o,B),le(J,B,null),u(o,Te),u(o,Y),le(H,Y,null),u(i,De),y&&y.m(i,null),pe=!0,ke||(Oe=[N(d,"change",s[16]),N(f,"change",s[17]),N(T,"change",s[18]),N(z,"click",s[19]),N(G,"click",s[23]),N(Q,"click",s[24])],ke=!0)},p(l,g){if(g[0]&4096){Z=Array.from(l[12].keys());let O;for(O=0;O<Z.length;O+=1){const Pe=et(l,Z,O);M[O]?M[O].p(Pe,g):(M[O]=tt(Pe),M[O].c(),M[O].m(d,null))}for(;O<M.length;O+=1)M[O].d(1);M.length=Z.length}g[0]&4112&&x(d,l[4]),l[4]?j?j.p(l,g):(j=st(l),j.c(),j.m(f,null)):j&&(j.d(1),j=null),g[0]&4144&&x(f,l[5]),l[5]?L?L.p(l,g):(L=ot(l),L.c(),L.m(T,null)):L&&(L.d(1),L=null),g[0]&4208&&x(T,l[6]),g[0]&2048&&q(r,"hidden",l[11]!=-1);const X={};g[1]&128&&(X.$$scope={dirty:g,ctx:l}),!se&&g[0]&1&&(se=!0,X.value=l[0],ae(()=>se=!1)),I.$set(X);const ye={};g[1]&128&&(ye.$$scope={dirty:g,ctx:l}),!ne&&g[0]&2&&(ne=!0,ye.value=l[1],ae(()=>ne=!1)),U.$set(ye);const Se={};g[1]&128&&(Se.$$scope={dirty:g,ctx:l}),!oe&&g[0]&4&&(oe=!0,Se.value=l[2],ae(()=>oe=!1)),V.$set(Se),g[0]&2048&&q(S,"hidden",l[11]!==0);const Ee={};g[1]&128&&(Ee.$$scope={dirty:g,ctx:l}),!we&&g[0]&8&&(we=!0,Ee.value=l[3],ae(()=>we=!1)),J.$set(Ee),g[0]&2048&&q(B,"hidden",l[11]!==1);const We={};!be&&g[0]&256&&(be=!0,We.recording=l[8],ae(()=>be=!1)),H.$set(We),g[0]&2048&&q(Y,"hidden",l[11]!==2&&l[11]!==1),l[10]?y?(y.p(l,g),g[0]&1024&&W(y,1)):(y=it(l),y.c(),W(y,1),y.m(i,null)):y&&(mt(),P(y,1,1,()=>{y=null}),_t())},i(l){pe||(W(I.$$.fragment,l),W(U.$$.fragment,l),W(V.$$.fragment,l),W(J.$$.fragment,l),W(H.$$.fragment,l),W(y),pe=!0)},o(l){P(I.$$.fragment,l),P(U.$$.fragment,l),P(V.$$.fragment,l),P(J.$$.fragment,l),P(H.$$.fragment,l),P(y),pe=!1},d(l){l&&A(t),s[15](null),l&&A(n),l&&A(i),Me(M,l),j&&j.d(),L&&L.d(),ce(I),ce(U),ce(V),ce(J),ce(H),y&&y.d(),ke=!1,Ge(Oe)}}}const lt=2;function zt(s,t,e){window.addEventListener("beforeunload",function(F){((a==null?void 0:a.state)==="recording"||(a==null?void 0:a.state)==="stopping")&&(F.returnValue="Do not close this window while recording",F.preventDefault())});const n=Nt();let i=JSON.parse(localStorage.getItem("screen-recorder-app-state")||"{}");const o=i.storeVersion!==lt?(()=>{const b=n.keys().next().value,F=n.get(b).keys().next().value,B=n.get(b).get(F)[0];return{systemAudio:!0,micAudio:!1,saveImediately:!0,timeOut:5,container:b,videoCodec:F,audioCodec:B}})():i;let r,a,c=o.systemAudio,d=o.micAudio,p=o.saveImediately,m=o.timeOut,w=o.container,f=o.videoCodec,_=o.audioCodec,k=!1,ee=0,T=!1,D=0;async function z(){e(8,k=!1),e(11,D=0)}async function te(){a=new Lt({microphone:d,systemAudio:c,timeslice:p?500:void 0,mime:"video/"+w+(At?";codecs:":";codecs=")+f+","+_,ext:Ze.get(w)}),a.addEventListener("stopping",z),a.addEventListener("error",z),window.r=a,e(7,r.srcObject=a.rStream,r),r.play(),await a.requestStreams(),e(11,D++,D)}async function S(){if(k)a.stop();else{e(10,T=!0);for await(let b of St(m))e(9,ee=b);e(10,T=!1),a.saveStream(),e(8,k=!0),e(11,D++,D)}}function I(b){$[b?"unshift":"push"](()=>{r=b,e(7,r)})}function se(){w=je(this),e(4,w),e(12,n)}function ue(){f=je(this),e(5,f),e(12,n),e(4,w)}function U(){_=je(this),e(6,_),e(12,n),e(4,w),e(5,f)}const ne=()=>e(11,D++,D);function de(b){c=b,e(0,c)}function V(b){d=b,e(1,d)}function oe(b){p=b,e(2,p)}const fe=()=>te(),G=()=>e(11,D--,D);function he(b){m=b,e(3,m)}function Q(b){k=b,e(8,k)}return s.$$.update=()=>{s.$$.dirty[0]&127&&localStorage.setItem("screen-recorder-app-state",JSON.stringify({systemAudio:c,micAudio:d,saveImediately:p,timeOut:m,container:w,videoCodec:f,audioCodec:_,storeVersion:lt}))},[c,d,p,m,w,f,_,r,k,ee,T,D,n,te,S,I,se,ue,U,ne,de,V,oe,fe,G,he,Q]}class Ft extends ve{constructor(t){super();_e(this,t,zt,Pt,me,{},null,[-1,-1])}}function Bt(s={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:n,onRegistered:i,onRegisterError:o}=s;let r;const a=async(c=!0)=>{};return"serviceWorker"in navigator&&(r=new gt("/screen-recorder/sw.js",{scope:"/screen-recorder/",type:"classic"}),r.addEventListener("activated",c=>{c.isUpdate?window.location.reload():n==null||n()}),r.register({immediate:t}).then(c=>{i==null||i(c)}).catch(c=>{o==null||o(c)})),a}async function Jt(){}Bt();const Ht=()=>window.app=new Ft({target:window.document.body});Jt().then(Ht);
//# sourceMappingURL=index.c7a796d9.js.map
