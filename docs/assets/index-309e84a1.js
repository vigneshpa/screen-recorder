var Vt=Object.defineProperty;var Wt=(e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Y=(e,t,n)=>(Wt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function ee(){}const bt=e=>e;function zt(e,t){for(const n in t)e[n]=t[n];return e}function kt(e){return e()}function ot(){return Object.create(null)}function K(e){e.forEach(kt)}function we(e){return typeof e=="function"}function Me(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Bt(e){return Object.keys(e).length===0}function Et(e,t,n,s){if(e){const o=St(e,t,n,s);return e[0](o)}}function St(e,t,n,s){return e[1]&&s?zt(n.ctx.slice(),e[1](s(t))):n.ctx}function Ct(e,t,n,s){if(e[2]&&s){const o=e[2](s(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const r=[],i=Math.max(t.dirty.length,o.length);for(let l=0;l<i;l+=1)r[l]=t.dirty[l]|o[l];return r}return t.dirty|o}return t.dirty}function At(e,t,n,s,o,r){if(o){const i=St(t,n,s,r);e.p(i,o)}}function Rt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let s=0;s<n;s++)t[s]=-1;return t}return-1}const Lt=typeof window<"u";let Ft=Lt?()=>window.performance.now():()=>Date.now(),Je=Lt?e=>requestAnimationFrame(e):ee;const ue=new Set;function Mt(e){ue.forEach(t=>{t.c(e)||(ue.delete(t),t.f())}),ue.size!==0&&Je(Mt)}function Jt(e){let t;return ue.size===0&&Je(Mt),{promise:new Promise(n=>{ue.add(t={c:e,f:n})}),abort(){ue.delete(t)}}}function m(e,t){e.appendChild(t)}function Tt(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ht(e){const t=v("style");return Kt(Tt(e),t),t.sheet}function Kt(e,t){return m(e.head||e,t),t.sheet}function M(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function He(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function R(){return L(" ")}function $t(){return L("")}function N(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ot(e){return e===""?null:+e}function Gt(e){return Array.from(e.childNodes)}function Ke(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function it(e,t){e.value=t??""}function oe(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}function Ie(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function I(e,t,n){e.classList[n?"add":"remove"](t)}function Qt(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,s,t),o}const Re=new Map;let Le=0;function Xt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Yt(e,t){const n={stylesheet:Ht(t),rules:{}};return Re.set(e,n),n}function lt(e,t,n,s,o,r,i,l=0){const c=16.666/s;let a=`{
`;for(let T=0;T<=1;T+=c){const k=t+(n-t)*r(T);a+=T*100+`%{${i(k,1-k)}}
`}const h=a+`100% {${i(n,1-n)}}
}`,d=`__svelte_${Xt(h)}_${l}`,_=Tt(e),{stylesheet:f,rules:p}=Re.get(_)||Yt(_,e);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${h}`,f.cssRules.length));const y=e.style.animation||"";return e.style.animation=`${y?`${y}, `:""}${d} ${s}ms linear ${o}ms 1 both`,Le+=1,d}function Zt(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),o=n.length-s.length;o&&(e.style.animation=s.join(", "),Le-=o,Le||xt())}function xt(){Je(()=>{Le||(Re.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)}),Re.clear())})}let Ge;function ve(e){Ge=e}const le=[],Z=[],Ce=[],ze=[],en=Promise.resolve();let Be=!1;function tn(){Be||(Be=!0,en.then(Dt))}function x(e){Ce.push(e)}function me(e){ze.push(e)}const je=new Set;let ie=0;function Dt(){if(ie!==0)return;const e=Ge;do{try{for(;ie<le.length;){const t=le[ie];ie++,ve(t),nn(t.$$)}}catch(t){throw le.length=0,ie=0,t}for(ve(null),le.length=0,ie=0;Z.length;)Z.pop()();for(let t=0;t<Ce.length;t+=1){const n=Ce[t];je.has(n)||(je.add(n),n())}Ce.length=0}while(le.length);for(;ze.length;)ze.pop()();Be=!1,je.clear(),ve(e)}function nn(e){if(e.fragment!==null){e.update(),K(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}let _e;function sn(){return _e||(_e=Promise.resolve(),_e.then(()=>{_e=null})),_e}function Ve(e,t,n){e.dispatchEvent(Qt(`${t?"intro":"outro"}${n}`))}const Ae=new Set;let H;function rn(){H={r:0,c:[],p:H}}function on(){H.r||K(H.c),H=H.p}function j(e,t){e&&e.i&&(Ae.delete(e),e.i(t))}function J(e,t,n,s){if(e&&e.o){if(Ae.has(e))return;Ae.add(e),H.c.push(()=>{Ae.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const ln={duration:0};function ct(e,t,n,s){const o={direction:"both"};let r=t(e,n,o),i=s?0:1,l=null,c=null,a=null;function h(){a&&Zt(e,a)}function d(f,p){const y=f.b-i;return p*=Math.abs(y),{a:i,b:f.b,d:y,duration:p,start:f.start,end:f.start+p,group:f.group}}function _(f){const{delay:p=0,duration:y=300,easing:T=bt,tick:k=ee,css:E}=r||ln,P={start:Ft()+p,b:f};f||(P.group=H,H.r+=1),l||c?c=P:(E&&(h(),a=lt(e,i,f,y,p,T,E)),f&&k(0,1),l=d(P,y),x(()=>Ve(e,f,"start")),Jt(V=>{if(c&&V>c.start&&(l=d(c,y),c=null,Ve(e,l.b,"start"),E&&(h(),a=lt(e,i,l.b,l.duration,0,T,r.css))),l){if(V>=l.end)k(i=l.b,1-i),Ve(e,l.b,"end"),c||(l.b?h():--l.group.r||K(l.group.c)),l=null;else if(V>=l.start){const S=V-l.start;i=l.a+l.d*T(S/l.duration),k(i,1-i)}}return!!(l||c)}))}return{run(f){we(r)?sn().then(()=>{r=r(o),_(f)}):_(f)},end(){h(),l=c=null}}}function pe(e,t,n){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function ge(e){e&&e.c()}function ce(e,t,n,s){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),s||x(()=>{const i=e.$$.on_mount.map(kt).filter(we);e.$$.on_destroy?e.$$.on_destroy.push(...i):K(i),e.$$.on_mount=[]}),r.forEach(x)}function ae(e,t){const n=e.$$;n.fragment!==null&&(K(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function cn(e,t){e.$$.dirty[0]===-1&&(le.push(e),tn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Te(e,t,n,s,o,r,i,l=[-1]){const c=Ge;ve(e);const a=e.$$={fragment:null,ctx:[],props:r,update:ee,not_equal:o,bound:ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ot(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};i&&i(a.root);let h=!1;if(a.ctx=n?n(e,t.props||{},(d,_,...f)=>{const p=f.length?f[0]:_;return a.ctx&&o(a.ctx[d],a.ctx[d]=p)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](p),h&&cn(e,d)),_}):[],a.update(),h=!0,K(a.before_update),a.fragment=s?s(a.ctx):!1,t.target){if(t.hydrate){const d=Gt(t.target);a.fragment&&a.fragment.l(d),d.forEach(A)}else a.fragment&&a.fragment.c();t.intro&&j(e.$$.fragment),ce(e,t.target,t.anchor,t.customElement),Dt()}ve(c)}class $e{$destroy(){ae(this,1),this.$destroy=ee}$on(t,n){if(!we(n))return ee;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!Bt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function an(e){let t,n,s,o,r,i,l,c,a,h,d;const _=e[4].default,f=Et(_,e,e[3],null);return{c(){t=v("div"),n=v("label"),f&&f.c(),s=R(),o=v("button"),o.textContent="-",r=R(),i=v("input"),l=R(),c=v("button"),c.textContent="+",g(n,"for",e[2]),g(n,"class","svelte-sfum2z"),g(o,"class","dec svelte-sfum2z"),g(i,"type","number"),g(i,"id",e[2]),g(i,"min",e[1]),g(i,"class","svelte-sfum2z"),g(c,"class","inc svelte-sfum2z"),g(t,"class","container svelte-sfum2z")},m(p,y){M(p,t,y),m(t,n),f&&f.m(n,null),m(t,s),m(t,o),m(t,r),m(t,i),it(i,e[0]),m(t,l),m(t,c),a=!0,h||(d=[N(o,"click",e[5]),N(i,"input",e[6]),N(c,"click",e[7])],h=!0)},p(p,[y]){f&&f.p&&(!a||y&8)&&At(f,_,p,p[3],a?Ct(_,p[3],y,null):Rt(p[3]),null),(!a||y&2)&&g(i,"min",p[1]),y&1&&Ot(i.value)!==p[0]&&it(i,p[0])},i(p){a||(j(f,p),a=!0)},o(p){J(f,p),a=!1},d(p){p&&A(t),f&&f.d(p),h=!1,K(d)}}}function un(e,t,n){let{$$slots:s={},$$scope:o}=t,{value:r=0}=t,{min:i=0}=t,l=Math.floor(Math.random()*1e3)+"-number";const c=()=>n(0,r--,r);function a(){r=Ot(this.value),n(0,r),n(1,i)}const h=()=>n(0,r++,r);return e.$$set=d=>{"value"in d&&n(0,r=d.value),"min"in d&&n(1,i=d.min),"$$scope"in d&&n(3,o=d.$$scope)},e.$$.update=()=>{e.$$.dirty&3&&(n(0,r=Math.trunc(r)),r<i&&n(0,r=i))},[r,i,l,o,s,c,a,h]}class fn extends $e{constructor(t){super(),Te(this,t,un,an,Me,{value:0,min:1})}}async function Fe(e=1e3){return new Promise(t=>setTimeout(()=>t(),e))}async function*dn(e,t=1e3){for(let n=0;n<=e&&(yield e-n,e!==n);n++)await Fe(t)}function hn(e,t){const n=document.createElement("a");n.hidden=!0;const s=URL.createObjectURL(t);n.href=s,n.download=e,document.body.append(n),n.click(),n.remove(),setTimeout(()=>URL.revokeObjectURL(s))}function mn(e){let t="hiddenDownloader",n=document.getElementById(t);n===null&&(n=document.createElement("iframe"),n.id=t,n.style.display="none",document.body.appendChild(n)),n.src=e}const _n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;setInterval(e=>fetch("/screen-recorder/streaming-downloads/ping"),1e4);function pn(e,t,n){if(n=n||"application/octet-stream",!window.navigator.serviceWorker.controller)throw new Error("No service worker registered");const s=gn(t),o=[];o.push(["Content-Disposition",`attachment; filename="${e}"`]),o.push(["Content-Type",n]),o.push(["Connection","close"]),o.push(["Cache-Control","no-cache"]);try{window.navigator.serviceWorker.controller.postMessage({type:"streaming-downloads-response",filename:e,stream:s,headers:o,status:200},[s])}catch(r){console.warn(r,"Trying with message channel");const i=new MessageChannel,l=i.port1;let c;l.addEventListener("message",async a=>{try{if(a.data==="start")c=s.getReader();else if(a.data==="pull"){const{value:h,done:d}=await c.read();d?l.postMessage("close"):l.postMessage(h)}else a.data==="cancel"&&c.cancel()}catch{l.postMessage("error")}}),window.navigator.serviceWorker.controller.postMessage({filename:e,headers:o,status:200,stream:i.port2},[i.port2])}setTimeout(()=>mn("/screen-recorder/streaming-downloads/"+e),1e3)}function gn(e){let t;return new ReadableStream({start(){t=e.getReader()},async pull(n){const{value:s,done:o}=await t.read();o?n.close():n.enqueue(new Uint8Array(await s.arrayBuffer()))},cancel(n){t.cancel(n)}})}class vn extends window.EventTarget{constructor(n){super();Y(this,"config");Y(this,"recorder");Y(this,"rStream");Y(this,"aDest");Y(this,"aCtx");Y(this,"writer");Y(this,"state");this.config=n,this.rStream=new MediaStream,this.recorder=new MediaRecorder(this.rStream,{mimeType:this.config.mime}),this.aCtx=new AudioContext,this.aDest=this.aCtx.createMediaStreamDestination(),this.state="idle"}async requestScreen(){const n=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.config.systemAudio});n.getVideoTracks().length<1&&this.throwError("Unable to get video"),n.getVideoTracks().forEach(s=>this.rStream.addTrack(s)),this.config.systemAudio&&(this.config.systemAudio=n.getAudioTracks().length>0),this.config.systemAudio&&this.aCtx.createMediaStreamSource(n).connect(this.aDest),this.recorder.addEventListener("stop",s=>setTimeout(o=>n.getTracks().forEach(r=>r.stop()),300)),n.getVideoTracks()[0].addEventListener("ended",()=>this.stop())}async requestMicrophone(){if(!this.config.microphone)return;const n=await navigator.mediaDevices.getUserMedia({audio:!0});this.config.microphone=n.getAudioTracks().length>0,this.config.microphone&&(this.recorder.addEventListener("stop",s=>setTimeout(o=>n.getTracks().forEach(r=>r.stop()),300)),this.aCtx.createMediaStreamSource(n).connect(this.aDest))}async requestStreams(){return this.state!=="idle"&&this.throwError("Recorder is not idle"),await this.requestMicrophone(),await this.requestScreen(),(this.config.microphone||this.config.systemAudio)&&this.aDest.stream.getAudioTracks().forEach(n=>this.rStream.addTrack(n)),this.state="gotPermissions",this.dispatchEvent(new Event("gotPermissions")),this.rStream}saveStream(n="screencapture-"+new Date().toLocaleDateString().replaceAll("/","-")){if(this.state!=="gotPermissions"&&this.throwError("The recorder's state is invalid"),this.config.timeslice&&window.navigator.serviceWorker.controller){const s=this;let o,r;const i=new ReadableStream({start(l){o=c=>{l.enqueue(c),Fe(s.config.timeslice).then(()=>{r&&(r(),r=null)})},s.recorder.addEventListener("dataavailable",async c=>{o(c.data)}),s.recorder.addEventListener("stop",c=>{Fe(s.config.timeslice*2).then(()=>l.close()),s.state="stopped",s.dispatchEvent(new Event("stopped"))})},pull(){return new Promise(l=>{r=l,s.recorder.state==="recording"&&s.recorder.requestData()})},cancel(){s.stop()}});pn(n+"."+this.config.ext,i,this.config.mime),this.recorder.start()}else this.recorder.addEventListener("dataavailable",s=>hn(n+"."+this.config.ext,s.data)),this.recorder.addEventListener("stop",s=>{this.state="stopped",this.dispatchEvent(new Event("stopped"))}),this.recorder.start();this.state="recording"}stop(){this.state==="recording"?this.recorder.stop():this.throwError("Cannot stop recording"),this.state="stopping",this.aCtx.close(),this.dispatchEvent(new Event("stopping"))}throwError(n){const s=new Error(n);this.state="error";const o=new Event("error");throw o.error=s,this.dispatchEvent(o),s}}function wn(e){let t,n,s,o,r,i,l,c,a,h;const d=e[3].default,_=Et(d,e,e[2],null);return{c(){t=v("div"),n=v("label"),s=v("input"),o=R(),r=v("div"),i=R(),l=v("label"),_&&_.c(),g(s,"type","checkbox"),g(s,"id",e[1]),g(s,"class","svelte-r0ot5f"),g(r,"class","but svelte-r0ot5f"),g(n,"class","switch svelte-r0ot5f"),g(l,"for",e[1]),g(l,"class","txt svelte-r0ot5f"),g(t,"class","container svelte-r0ot5f")},m(f,p){M(f,t,p),m(t,n),m(n,s),s.checked=e[0],m(n,o),m(n,r),m(t,i),m(t,l),_&&_.m(l,null),c=!0,a||(h=N(s,"change",e[4]),a=!0)},p(f,[p]){p&1&&(s.checked=f[0]),_&&_.p&&(!c||p&4)&&At(_,d,f,f[2],c?Ct(d,f[2],p,null):Rt(f[2]),null)},i(f){c||(j(_,f),c=!0)},o(f){J(_,f),c=!1},d(f){f&&A(t),_&&_.d(f),a=!1,h()}}}function yn(e,t,n){let{$$slots:s={},$$scope:o}=t,{value:r=!1}=t,i=Math.trunc(Math.random()*1e3)+"-switch";function l(){r=this.checked,n(0,r)}return e.$$set=c=>{"value"in c&&n(0,r=c.value),"$$scope"in c&&n(2,o=c.$$scope)},[r,i,o,s,l]}class We extends $e{constructor(t){super(),Te(this,t,yn,wn,Me,{value:0})}}function bn(e){let t,n,s,o,r;return{c(){t=v("div"),n=v("div"),s=v("div"),g(s,"class","innerdiv svelte-r167gc"),I(s,"recording",e[0]),g(n,"class","ring svelte-r167gc"),I(n,"recording",e[0]),g(t,"class","container svelte-r167gc")},m(i,l){M(i,t,l),m(t,n),m(n,s),o||(r=[N(n,"click",function(){we(e[1])&&e[1].apply(this,arguments)}),N(n,"keydown",function(){we(e[1])&&e[1].apply(this,arguments)})],o=!0)},p(i,[l]){e=i,l&1&&I(s,"recording",e[0]),l&1&&I(n,"recording",e[0])},i:ee,o:ee,d(i){i&&A(t),o=!1,K(r)}}}function kn(e,t,n){let{recording:s=!1}=t,{toogle:o=()=>{n(0,s=!s)}}=t;return e.$$set=r=>{"recording"in r&&n(0,s=r.recording),"toogle"in r&&n(1,o=r.toogle)},[s,o]}class En extends $e{constructor(t){super(),Te(this,t,kn,bn,Me,{recording:0,toogle:1})}}function at(e,{delay:t=0,duration:n=400,easing:s=bt}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:r=>`opacity: ${r*o}`}}function Sn(){const e=["webm","x-matroska","mp4","ogg"],t=[["av1","av01","vp10"],["vp9","vp09","vp9.0"],["h265","h.265","hevc"],["vp8","vp08","vp8.0"],["avc1","h264","h.264"],["theora"],["h263","h.263"],["mp4v"]],n=[["opus"],["aac"],["vorbis"],["mp4a"]],s=new Map;for(let o of e){if(!MediaRecorder.isTypeSupported("video/"+o))continue;const r=new Map;for(let i of t){const l=i.find(a=>MediaRecorder.isTypeSupported("video/"+o+';codecs="'+a+'"'));if(!l)continue;const c=[];for(let a of n){const h=a.find(d=>MediaRecorder.isTypeSupported("video/"+o+';codecs="'+l+","+d+'"'));h&&c.push(h)}r.set(l,c)}s.set(o,r)}return s}const Nt=new Map([["webm","webm"],["x-matroska","mkv"],["mp4","mp4"],["ogg","ogg"]]);function ut(e,t,n){const s=e.slice();return s[32]=t[n],s}function ft(e,t,n){const s=e.slice();return s[32]=t[n],s}function dt(e,t,n){const s=e.slice();return s[32]=t[n],s}function ht(e){let t,n=e[32]+"",s,o,r=Nt.get(e[32])+"",i,l;return{c(){t=v("option"),s=L(n),o=L(" (*."),i=L(r),l=L(")"),t.__value=e[32],t.value=t.__value,g(t,"class","svelte-12m5ml4")},m(c,a){M(c,t,a),m(t,s),m(t,o),m(t,i),m(t,l)},p:ee,d(c){c&&A(t)}}}function mt(e){var o;let t,n=Array.from(((o=e[12].get(e[4]))==null?void 0:o.keys())||[]),s=[];for(let r=0;r<n.length;r+=1)s[r]=_t(ft(e,n,r));return{c(){for(let r=0;r<s.length;r+=1)s[r].c();t=$t()},m(r,i){for(let l=0;l<s.length;l+=1)s[l].m(r,i);M(r,t,i)},p(r,i){var l;if(i[0]&4112){n=Array.from(((l=r[12].get(r[4]))==null?void 0:l.keys())||[]);let c;for(c=0;c<n.length;c+=1){const a=ft(r,n,c);s[c]?s[c].p(a,i):(s[c]=_t(a),s[c].c(),s[c].m(t.parentNode,t))}for(;c<s.length;c+=1)s[c].d(1);s.length=n.length}},d(r){He(s,r),r&&A(t)}}}function _t(e){let t,n=e[32]+"",s,o;return{c(){t=v("option"),s=L(n),t.__value=o=e[32],t.value=t.__value,g(t,"class","svelte-12m5ml4")},m(r,i){M(r,t,i),m(t,s)},p(r,i){i[0]&16&&n!==(n=r[32]+"")&&Ke(s,n),i[0]&4112&&o!==(o=r[32])&&(t.__value=o,t.value=t.__value)},d(r){r&&A(t)}}}function pt(e){var o,r;let t,n=((r=(o=e[12])==null?void 0:o.get(e[4]))==null?void 0:r.get(e[5]))||[],s=[];for(let i=0;i<n.length;i+=1)s[i]=gt(ut(e,n,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=$t()},m(i,l){for(let c=0;c<s.length;c+=1)s[c].m(i,l);M(i,t,l)},p(i,l){var c,a;if(l[0]&4144){n=((a=(c=i[12])==null?void 0:c.get(i[4]))==null?void 0:a.get(i[5]))||[];let h;for(h=0;h<n.length;h+=1){const d=ut(i,n,h);s[h]?s[h].p(d,l):(s[h]=gt(d),s[h].c(),s[h].m(t.parentNode,t))}for(;h<s.length;h+=1)s[h].d(1);s.length=n.length}},d(i){He(s,i),i&&A(t)}}}function gt(e){let t,n=e[32]+"",s,o;return{c(){t=v("option"),s=L(n),t.__value=o=e[32],t.value=t.__value,g(t,"class","svelte-12m5ml4")},m(r,i){M(r,t,i),m(t,s)},p(r,i){i[0]&48&&n!==(n=r[32]+"")&&Ke(s,n),i[0]&4144&&o!==(o=r[32])&&(t.__value=o,t.value=t.__value)},d(r){r&&A(t)}}}function Cn(e){let t;return{c(){t=L("Record system audio")},m(n,s){M(n,t,s)},d(n){n&&A(t)}}}function An(e){let t;return{c(){t=L("Record from microphone")},m(n,s){M(n,t,s)},d(n){n&&A(t)}}}function Rn(e){let t;return{c(){t=L("Save video while recording (recomended)")},m(n,s){M(n,t,s)},d(n){n&&A(t)}}}function Ln(e){let t;return{c(){t=L("Countdown")},m(n,s){M(n,t,s)},d(n){n&&A(t)}}}function vt(e){let t,n,s,o;return{c(){t=v("div"),n=L(e[9]),g(t,"class","counter svelte-12m5ml4")},m(r,i){M(r,t,i),m(t,n),o=!0},p(r,i){(!o||i[0]&512)&&Ke(n,r[9])},i(r){o||(x(()=>{s||(s=ct(t,at,{},!0)),s.run(1)}),o=!0)},o(r){s||(s=ct(t,at,{},!1)),s.run(0),o=!1},d(r){r&&A(t),r&&s&&s.end()}}}function Mn(e){let t,n,s,o,r,i,l,c,a,h,d,_,f,p,y,T,k,E,P,V,S,W,fe,ye,z,de,be,B,he,ke,te,Ee,G,Se,b,q,F,Oe,Qe,se,Q,De,Xe,X,Ne,Ye,re=Array.from(e[12].keys()),$=[];for(let u=0;u<re.length;u+=1)$[u]=ht(dt(e,re,u));let O=e[4]&&mt(e),D=e[5]&&pt(e);function Pt(u){e[20](u)}let Ze={$$slots:{default:[Cn]},$$scope:{ctx:e}};e[0]!==void 0&&(Ze.value=e[0]),W=new We({props:Ze}),Z.push(()=>pe(W,"value",Pt));function qt(u){e[21](u)}let xe={$$slots:{default:[An]},$$scope:{ctx:e}};e[1]!==void 0&&(xe.value=e[1]),z=new We({props:xe}),Z.push(()=>pe(z,"value",qt));function Ut(u){e[22](u)}let et={$$slots:{default:[Rn]},$$scope:{ctx:e}};e[2]!==void 0&&(et.value=e[2]),B=new We({props:et}),Z.push(()=>pe(B,"value",Ut));function It(u){e[26](u)}let tt={$$slots:{default:[Ln]},$$scope:{ctx:e}};e[3]!==void 0&&(tt.value=e[3]),F=new fn({props:tt}),Z.push(()=>pe(F,"value",It));function jt(u){e[27](u)}let nt={toogle:e[14]};e[8]!==void 0&&(nt.recording=e[8]),Q=new En({props:nt}),Z.push(()=>pe(Q,"recording",jt));let C=e[10]&&vt(e);return{c(){t=v("div"),n=v("video"),s=R(),o=v("div"),r=v("div"),i=v("div"),l=v("label"),c=L(`Container:
        `),a=v("select");for(let u=0;u<$.length;u+=1)$[u].c();h=R(),d=v("label"),_=L(`Video Codec:
        `),f=v("select"),O&&O.c(),p=R(),y=v("label"),T=L(`Audio Codec:
        `),k=v("select"),D&&D.c(),E=R(),P=v("button"),P.textContent="Done",V=R(),S=v("div"),ge(W.$$.fragment),ye=R(),ge(z.$$.fragment),be=R(),ge(B.$$.fragment),ke=R(),te=v("button"),te.textContent="Select Screen",Ee=R(),G=v("a"),G.textContent="change video settings",Se=v("br"),b=R(),q=v("div"),ge(F.$$.fragment),Qe=R(),se=v("div"),ge(Q.$$.fragment),Xe=R(),C&&C.c(),n.muted=!0,g(n,"class","svelte-12m5ml4"),g(t,"class","vid svelte-12m5ml4"),g(a,"class","svelte-12m5ml4"),e[4]===void 0&&x(()=>e[16].call(a)),g(l,"class","svelte-12m5ml4"),g(f,"class","svelte-12m5ml4"),e[5]===void 0&&x(()=>e[17].call(f)),g(d,"class","svelte-12m5ml4"),g(k,"class","svelte-12m5ml4"),e[6]===void 0&&x(()=>e[18].call(k)),g(y,"class","svelte-12m5ml4"),g(P,"class","svelte-12m5ml4"),g(i,"class","video-options svelte-12m5ml4"),I(i,"hidden",e[11]!=-1),g(te,"class","svelte-12m5ml4"),g(G,"class","svelte-12m5ml4"),g(S,"class","options svelte-12m5ml4"),I(S,"hidden",e[11]!==0),g(q,"class","countdown svelte-12m5ml4"),I(q,"hidden",e[11]!==1),g(se,"class","record svelte-12m5ml4"),I(se,"hidden",e[11]!==2&&e[11]!==1),g(r,"class","pannel svelte-12m5ml4"),g(o,"class","overlay svelte-12m5ml4")},m(u,w){M(u,t,w),m(t,n),e[15](n),M(u,s,w),M(u,o,w),m(o,r),m(r,i),m(i,l),m(l,c),m(l,a);for(let ne=0;ne<$.length;ne+=1)$[ne].m(a,null);oe(a,e[4]),m(i,h),m(i,d),m(d,_),m(d,f),O&&O.m(f,null),oe(f,e[5]),m(i,p),m(i,y),m(y,T),m(y,k),D&&D.m(k,null),oe(k,e[6]),m(i,E),m(i,P),m(r,V),m(r,S),ce(W,S,null),m(S,ye),ce(z,S,null),m(S,be),ce(B,S,null),m(S,ke),m(S,te),m(S,Ee),m(S,G),m(S,Se),m(r,b),m(r,q),ce(F,q,null),m(r,Qe),m(r,se),ce(Q,se,null),m(o,Xe),C&&C.m(o,null),X=!0,Ne||(Ye=[N(a,"change",e[16]),N(f,"change",e[17]),N(k,"change",e[18]),N(P,"click",e[19]),N(te,"click",e[23]),N(G,"click",e[24]),N(G,"keypress",e[25])],Ne=!0)},p(u,w){if(w[0]&4096){re=Array.from(u[12].keys());let U;for(U=0;U<re.length;U+=1){const rt=dt(u,re,U);$[U]?$[U].p(rt,w):($[U]=ht(rt),$[U].c(),$[U].m(a,null))}for(;U<$.length;U+=1)$[U].d(1);$.length=re.length}w[0]&4112&&oe(a,u[4]),u[4]?O?O.p(u,w):(O=mt(u),O.c(),O.m(f,null)):O&&(O.d(1),O=null),w[0]&4144&&oe(f,u[5]),u[5]?D?D.p(u,w):(D=pt(u),D.c(),D.m(k,null)):D&&(D.d(1),D=null),w[0]&4208&&oe(k,u[6]),(!X||w[0]&2048)&&I(i,"hidden",u[11]!=-1);const ne={};w[1]&256&&(ne.$$scope={dirty:w,ctx:u}),!fe&&w[0]&1&&(fe=!0,ne.value=u[0],me(()=>fe=!1)),W.$set(ne);const Pe={};w[1]&256&&(Pe.$$scope={dirty:w,ctx:u}),!de&&w[0]&2&&(de=!0,Pe.value=u[1],me(()=>de=!1)),z.$set(Pe);const qe={};w[1]&256&&(qe.$$scope={dirty:w,ctx:u}),!he&&w[0]&4&&(he=!0,qe.value=u[2],me(()=>he=!1)),B.$set(qe),(!X||w[0]&2048)&&I(S,"hidden",u[11]!==0);const Ue={};w[1]&256&&(Ue.$$scope={dirty:w,ctx:u}),!Oe&&w[0]&8&&(Oe=!0,Ue.value=u[3],me(()=>Oe=!1)),F.$set(Ue),(!X||w[0]&2048)&&I(q,"hidden",u[11]!==1);const st={};!De&&w[0]&256&&(De=!0,st.recording=u[8],me(()=>De=!1)),Q.$set(st),(!X||w[0]&2048)&&I(se,"hidden",u[11]!==2&&u[11]!==1),u[10]?C?(C.p(u,w),w[0]&1024&&j(C,1)):(C=vt(u),C.c(),j(C,1),C.m(o,null)):C&&(rn(),J(C,1,1,()=>{C=null}),on())},i(u){X||(j(W.$$.fragment,u),j(z.$$.fragment,u),j(B.$$.fragment,u),j(F.$$.fragment,u),j(Q.$$.fragment,u),j(C),X=!0)},o(u){J(W.$$.fragment,u),J(z.$$.fragment,u),J(B.$$.fragment,u),J(F.$$.fragment,u),J(Q.$$.fragment,u),J(C),X=!1},d(u){u&&A(t),e[15](null),u&&A(s),u&&A(o),He($,u),O&&O.d(),D&&D.d(),ae(W),ae(z),ae(B),ae(F),ae(Q),C&&C.d(),Ne=!1,K(Ye)}}}const wt=2;function Tn(e,t,n){window.addEventListener("beforeunload",function(q){((l==null?void 0:l.state)==="recording"||(l==null?void 0:l.state)==="stopping")&&(q.returnValue="Do not close this window while recording",q.preventDefault())});const s=Sn();let o=JSON.parse(localStorage.getItem("screen-recorder-app-state")||"{}");const r=o.storeVersion!==wt?(()=>{const b=s.keys().next().value,q=s.get(b).keys().next().value,F=s.get(b).get(q)[0];return{systemAudio:!0,micAudio:!1,saveImediately:!0,timeOut:5,container:b,videoCodec:q,audioCodec:F}})():o;let i,l,c=r.systemAudio,a=r.micAudio,h=r.saveImediately,d=r.timeOut,_=r.container,f=r.videoCodec,p=r.audioCodec,y=!1,T=0,k=!1,E=0;async function P(){n(8,y=!1),n(11,E=0)}async function V(){l=new vn({microphone:a,systemAudio:c,timeslice:h?500:void 0,mime:"video/"+_+(_n?";codecs:":";codecs=")+f+","+p,ext:Nt.get(_)}),l.addEventListener("stopping",P),l.addEventListener("error",P),window.r=l,n(7,i.srcObject=l.rStream,i),i.play(),await l.requestStreams(),n(11,E++,E)}async function S(){if(y)l.stop();else{n(10,k=!0);for await(let b of dn(d))n(9,T=b);n(10,k=!1),l.saveStream(),n(8,y=!0),n(11,E++,E)}}function W(b){Z[b?"unshift":"push"](()=>{i=b,n(7,i)})}function fe(){_=Ie(this),n(4,_),n(12,s)}function ye(){f=Ie(this),n(5,f),n(12,s),n(4,_)}function z(){p=Ie(this),n(6,p),n(12,s),n(4,_),n(5,f)}const de=()=>n(11,E++,E);function be(b){c=b,n(0,c)}function B(b){a=b,n(1,a)}function he(b){h=b,n(2,h)}const ke=()=>V(),te=()=>n(11,E--,E),Ee=()=>n(11,E--,E);function G(b){d=b,n(3,d)}function Se(b){y=b,n(8,y)}return e.$$.update=()=>{e.$$.dirty[0]&127&&localStorage.setItem("screen-recorder-app-state",JSON.stringify({systemAudio:c,micAudio:a,saveImediately:h,timeOut:d,container:_,videoCodec:f,audioCodec:p,storeVersion:wt}))},[c,a,h,d,_,f,p,i,y,T,k,E,s,V,S,W,fe,ye,z,de,be,B,he,ke,te,Ee,G,Se]}class $n extends $e{constructor(t){super(),Te(this,t,Tn,Mn,Me,{},null,[-1,-1])}}const On="modulepreload",Dn=function(e){return"/screen-recorder/"+e},yt={},Nn=function(t,n,s){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=Dn(r),r in yt)return;yt[r]=!0;const i=r.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!s)for(let h=o.length-1;h>=0;h--){const d=o[h];if(d.href===r&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":On,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((h,d)=>{a.addEventListener("load",h),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function Pn(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:o,onRegisteredSW:r,onRegisterError:i}=e;let l,c;const a=async(d=!0)=>{await c};async function h(){if("serviceWorker"in navigator){const{Workbox:d}=await Nn(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);l=new d("/screen-recorder/sw.js",{scope:"/screen-recorder/",type:"classic"}),l.addEventListener("activated",_=>{(_.isUpdate||_.isExternal)&&window.location.reload()}),l.addEventListener("installed",_=>{_.isUpdate||s==null||s()}),l.register({immediate:t}).then(_=>{r?r("/screen-recorder/sw.js",_):o==null||o(_)}).catch(_=>{i==null||i(_)})}}return c=h(),a}async function qn(){}Pn();const Un=()=>window.app=new $n({target:window.document.body});qn().then(Un);
//# sourceMappingURL=index-309e84a1.js.map
