{"version":3,"file":"index.e802e026.js","sources":["../../vite/modulepreload-polyfill","../../src/lib/Number.svelte","../../src/lib/message-channel-stream.ts","../../src/lib/utils.ts","../../src/lib/streaming-download.ts","../../src/lib/Recorder.ts","../../src/lib/Switch.svelte","../../src/lib/RecordSwitch.svelte","../../src/App.svelte","../../../../../../@vite-plugin-pwa/virtual:pwa-register","../../src/ponyfill.ts","../../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","<script>\n  export let value = 0;\n  $: {\n    value = Math.trunc(value);\n    if (value < min) value = min;\n  }\n  export let min = 0;\n  let id = Math.floor(Math.random() * 1000) + '-number';\n</script>\n\n<div class=\"container\">\n  <label for={id}>\n    <slot />\n  </label>\n  <button class=\"dec\" on:click={() => value--}>-</button>\n  <input type=\"number\" {id} bind:value {min} />\n  <button class=\"inc\" on:click={() => value++}>+</button>\n</div>\n\n<style>\n  .container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  button {\n    width: 2rem;\n    height: 100%;\n    padding: 0.5rem;\n    margin: 0;\n    border-radius: 0;\n    line-height: 1rem;\n    border: none;\n    transition: background-color 0.3s ease;\n    background-color: rgb(214, 214, 214);\n  }\n  button:hover {\n    background-color: rgb(155, 155, 155);\n  }\n  button:active {\n    background-color: rgb(102, 102, 102);\n  }\n  input {\n    width: 3rem;\n    border: none;\n    height: 1rem;\n    padding: 0.5rem;\n    margin: 0;\n    line-height: 1rem;\n    text-align: center;\n    background-color: rgb(214, 214, 214);\n  }\n  label {\n    margin: 1rem;\n  }\n\n  /* Chrome, Safari, Edge, Opera */\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  /* Firefox */\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n</style>\n","export function passStream<T extends any>(\n  stream: ReadableStream<T>,\n  port: MessagePort,\n  getTransferables = (_chunk: T) => [] as any[]\n) {\n  console.warn('Using postMessage to stream between a message channel');\n  const ping = window.setInterval(() => port.postMessage('ping'), 1000);\n  port.start();\n  port.addEventListener('messageerror', e => console.error(e));\n  port.addEventListener('message', async e => {\n    const message = e.data;\n    if (message === 'start') {\n      const reader = stream.getReader();\n      while (true) {\n        const { done, value } = await reader.read();\n        if (value) port.postMessage(value, { transfer: getTransferables(value) });\n        if (done) {\n          clearInterval(ping);\n          port.postMessage('stop');\n          break;\n        }\n      }\n    }\n  });\n}\nexport function getStream<T extends any>(port: MessagePort): ReadableStream<T> {\n  const stream = new ReadableStream<T>({\n    start(controller) {\n      port.start();\n      port.addEventListener('message', e => {\n        const data: 'stop' | 'error' | T = e.data;\n        if (typeof data === 'string') {\n          if (data === 'error') controller.error();\n          else if (data === 'stop') controller.close();\n        } else {\n          controller.enqueue(data);\n        }\n      });\n      port.postMessage('start');\n    },\n  });\n  return stream;\n}\n","export async function wait(time: number = 1000): Promise<void> {\n  return new Promise(resolve => setTimeout(() => resolve(), time));\n}\nexport async function* countdown(times: number, delay: number = 1000) {\n  for (let i = 0; i <= times; i++) {\n    yield times - i;\n    if (times === i) break;\n    await wait(delay);\n  }\n}\nexport function saveBlob(filename: string, blob: Blob) {\n  const link = document.createElement('a');\n  link.hidden = true;\n  const url = URL.createObjectURL(blob);\n  link.href = url;\n  link.download = filename;\n  document.body.append(link);\n  link.click();\n  link.remove();\n  setTimeout(() => URL.revokeObjectURL(url));\n}\nexport function downloadURL(url: string) {\n  let hiddenIFrameID = 'hiddenDownloader',\n    iframe = document.getElementById(hiddenIFrameID) as HTMLIFrameElement;\n  if (iframe === null) {\n    iframe = document.createElement('iframe');\n    iframe.id = hiddenIFrameID;\n    iframe.style.display = 'none';\n    document.body.appendChild(iframe);\n  }\n  iframe.src = url;\n}\n","import { passStream } from './message-channel-stream';\nimport { downloadURL } from './utils';\n\nexport function saveStream(\n  filename: string,\n  stream: ReadableStream<Uint8Array>,\n  contentType: string = 'application/octet-stream'\n) {\n  if (!window.navigator.serviceWorker.controller) throw new Error('No service worker registered');\n  const headers: [string, string][] = [];\n  headers.push(['Content-Disposition', `attachment; filename=\"${filename}\"`]);\n  headers.push(['Content-Type', contentType]);\n  try {\n    window.navigator.serviceWorker.controller.postMessage(\n      {\n        type: 'streaming-downloads-response',\n        filename,\n        stream,\n        headers,\n      },\n      [stream as any]\n    );\n  } catch (e) {\n    console.warn(e);\n    const channel = new MessageChannel();\n    passStream(stream, channel.port1, chunk => [chunk.buffer]);\n    window.navigator.serviceWorker.controller.postMessage(\n      {\n        type: 'streaming-downloads-response-port',\n        filename,\n        port: channel.port2,\n        headers,\n      },\n      [channel.port2]\n    );\n  }\n  window.addEventListener('beforeunload', _ =>\n    window.navigator.serviceWorker.controller!.postMessage({\n      type: 'streaming-downloads-revoke',\n      filename,\n    })\n  );\n  setTimeout(() => downloadURL(import.meta.env.BASE_URL + 'streaming-downloads/' + filename), 1000);\n}\n","import { saveStream } from './streaming-download';\nimport { saveBlob } from './utils';\n\ninterface RecorderConfig {\n  systemAudio: boolean;\n  microphone: boolean;\n  timeslice?: number;\n}\nexport default class Recorder extends window.EventTarget {\n  config: RecorderConfig;\n  recorder: MediaRecorder;\n  rStream: MediaStream;\n  aDest: MediaStreamAudioDestinationNode;\n  aCtx: AudioContext;\n  writer?: WritableStreamDefaultWriter<Blob>;\n  state: 'idle' | 'gotPermissions' | 'error' | 'recording' | 'stopped' | 'stopping';\n  constructor(config: RecorderConfig) {\n    super();\n    this.config = config;\n    this.rStream = new MediaStream();\n    this.recorder = new MediaRecorder(this.rStream);\n    this.aCtx = new AudioContext();\n    this.aDest = this.aCtx.createMediaStreamDestination();\n    this.state = 'idle';\n  }\n  async requestScreen() {\n    const stream = await navigator.mediaDevices.getDisplayMedia({\n      video: true,\n      audio: true,\n    });\n    if (stream.getVideoTracks().length < 1) this.throwError('Unable to get video');\n    stream.getVideoTracks().forEach(trk => this.rStream.addTrack(trk));\n    if (this.config.systemAudio) this.config.systemAudio = stream.getAudioTracks().length > 0;\n    if (this.config.systemAudio) this.aCtx.createMediaStreamSource(stream).connect(this.aDest);\n    this.recorder.addEventListener('stop', _ =>\n      setTimeout(_ => stream.getTracks().forEach(trk => trk.stop()), 300)\n    );\n    stream.getVideoTracks()[0].addEventListener('ended', () => this.stop());\n  }\n  async requestMicrophone() {\n    if (!this.config.microphone) return;\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n    this.config.microphone = stream.getAudioTracks().length > 0;\n    if (!this.config.microphone) return;\n    this.aCtx.createMediaStreamSource(stream!).connect(this.aDest);\n  }\n  async requestStreams() {\n    if (this.state !== 'idle') this.throwError('Recorder is not idle');\n    await this.requestScreen();\n    await this.requestMicrophone();\n    if (this.config.microphone || this.config.systemAudio)\n      this.aDest.stream.getAudioTracks().forEach(trk => this.rStream.addTrack(trk));\n    this.state = 'gotPermissions';\n    this.dispatchEvent(new Event('gotPermissions'));\n    return this.rStream;\n  }\n  saveStream() {\n    if (this.state !== 'gotPermissions') this.throwError(\"The recorder's state is invalid\");\n    const ext = this.recorder.mimeType.split(';')[0].split('/')[1] || 'webm';\n    if (this.config.timeslice) {\n      const recorder = this;\n      const readable = new ReadableStream<Uint8Array>({\n        start(controller) {\n          recorder.recorder.addEventListener('dataavailable', async e =>\n            controller.enqueue(new Uint8Array(await e.data.arrayBuffer()))\n          );\n          recorder.recorder.addEventListener('stop', _ =>\n            setTimeout(_ => {\n              controller.close();\n              recorder.state = 'stopped';\n              recorder.dispatchEvent(new Event('stopped'));\n            }, 1000)\n          );\n        },\n      });\n      saveStream('output.' + ext, readable);\n      this.recorder.start(this.config.timeslice);\n      setTimeout(() => this.recorder.requestData(), 1000);\n    } else {\n      this.recorder.addEventListener('dataavailable', e => saveBlob('output', e.data));\n      this.recorder.addEventListener('stop', _ => {\n        this.state = 'stopped';\n        this.dispatchEvent(new Event('stopped'));\n      });\n      this.recorder.start();\n    }\n    this.state = 'recording';\n  }\n  stop() {\n    if (this.state === 'recording') this.recorder.stop();\n    else this.throwError('Cannot stop recording');\n    this.state = 'stopping';\n    this.dispatchEvent(new Event('stopping'));\n  }\n  throwError(error: string) {\n    const err = new Error(error);\n    this.state = 'error';\n    const evnt: any = new Event('error');\n    evnt.error = err;\n    this.dispatchEvent(evnt);\n    throw err;\n  }\n}\n","<script>\n  export let value = false;\n  let id = Math.trunc(Math.random() * 1000) + '-switch';\n</script>\n\n<div class=\"container\">\n  <label class=\"switch\"\n    ><input type=\"checkbox\" {id} bind:checked={value} />\n    <div class=\"but\" />\n  </label>\n  <label for={id} class=\"txt\"><slot /></label>\n</div>\n\n<style>\n  .container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin: 0.3rem;\n  }\n  .switch input {\n    position: absolute;\n    opacity: 0;\n  }\n  .switch {\n    display: inline-block;\n    font-size: 20px; /* 1 */\n    height: 1rem;\n    width: 2rem;\n    background: #bdb9a6;\n    border-radius: 1rem;\n    padding: 2px;\n    margin: 0.2rem;\n  }\n  .switch .but {\n    height: 1rem;\n    width: 1rem;\n    border-radius: 1rem;\n    background: #fff;\n    box-shadow: 0 0.1rem 0.3rem rgba(0, 0, 0, 0.3);\n    transition: all 300ms;\n  }\n  .switch input:checked + .but {\n    transform: translate3d(100%, 0, 0);\n    background-color: #1f49a3;\n    box-shadow: 0 0 5px grey;\n  }\n  .txt {\n    margin: 0.2rem;\n  }\n</style>\n","<script>\n  export let recording = false;\n  export let toogle = () => {\n    recording = !recording;\n  };\n</script>\n\n<div class=\"container\">\n  <div class=\"ring\" on:click={toogle} class:recording>\n    <div class=\"innerdiv\" class:recording />\n  </div>\n</div>\n\n<style>\n  .innerdiv {\n    border-radius: 50%;\n    width: 3rem;\n    height: 3rem;\n    background-color: red;\n    transition: border-radius 0.3s ease-in-out;\n  }\n  .innerdiv.recording {\n    border-radius: 10%;\n    animation: scaleWaves 1s ease infinite;\n  }\n  .ring {\n    padding: 1rem;\n    border: 1rem;\n    border: solid 0.5rem red;\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    cursor: pointer;\n    margin: 2rem;\n  }\n  .ring.recording {\n    animation: waves 1s ease infinite;\n  }\n  @keyframes waves {\n    0% {\n      border: solid 0.5rem red;\n    }\n    50% {\n      border: solid 2rem rgba(255, 0, 0, 0);\n    }\n    51% {\n      border: solid 0.1rem rgba(255, 0, 0, 0);\n    }\n    75% {\n      border: solid 0.5rem red;\n    }\n    100% {\n      border: solid 0.5rem red;\n    }\n  }\n  @keyframes scaleWaves {\n    0% {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(0.9);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  .container {\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 13rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import Number from './lib/Number.svelte';\n  import Recorder from './lib/Recorder';\n  import Switch from './lib/Switch.svelte';\n  import RecordSwitch from './lib/RecordSwitch.svelte';\n  import { fade } from 'svelte/transition';\n  import { countdown } from './lib/utils';\n\n  const oldState = JSON.parse(\n    localStorage.getItem('screen-recorder-app-state') ||\n      JSON.stringify({\n        systemAudio: true,\n        micAudio: false,\n        saveImediately: true,\n        timeOut: 5,\n      })\n  );\n  let vid: HTMLVideoElement;\n  let r: Recorder;\n  let systemAudio: boolean = oldState.systemAudio;\n  let micAudio: boolean = oldState.micAudio;\n  let saveImediately: boolean = oldState.saveImediately;\n  let timeOut: number = oldState.timeOut;\n  let recording = false;\n  let counter = 0;\n  let counting = false;\n  let stage = 0;\n  $: {\n    localStorage.setItem(\n      'screen-recorder-app-state',\n      JSON.stringify({\n        systemAudio,\n        micAudio,\n        saveImediately,\n        timeOut,\n      })\n    );\n  }\n  async function reset() {\n    recording = false;\n    stage = 0;\n  }\n  async function select() {\n    r = new Recorder({\n      microphone: micAudio,\n      systemAudio,\n      timeslice: saveImediately ? 3000 : undefined,\n    });\n    r.addEventListener('stopping', reset);\n    r.addEventListener('error', reset);\n    (window as any).r = r;\n    vid.srcObject = r.rStream;\n    vid.play();\n    await r.requestStreams();\n    stage++;\n  }\n  async function toogle() {\n    if (recording) {\n      r.stop();\n    } else {\n      counting = true;\n      for await (let i of countdown(timeOut)) counter = i;\n      counting = false;\n      r.saveStream();\n      recording = true;\n      stage++;\n    }\n  }\n</script>\n\n<div class=\"vid\">\n  <!-- svelte-ignore a11y-media-has-caption -->\n  <video bind:this={vid} muted />\n</div>\n<div class=\"overlay\">\n  <div class=\"pannel\">\n    <div class=\"options\" class:hidden={stage !== 0}>\n      <Switch bind:value={systemAudio}>Record system audio</Switch>\n      <Switch bind:value={micAudio}>Record from microphone</Switch>\n      <Switch bind:value={saveImediately}>Save video while recroding (recomended)</Switch>\n      <button on:click={() => select()}>Select Screen</button>\n    </div>\n    <div class=\"countdown\" class:hidden={stage !== 1}>\n      <Number bind:value={timeOut}>Countdown</Number>\n    </div>\n    <div class=\"record\" class:hidden={stage !== 2 && stage !== 1}>\n      <RecordSwitch bind:recording {toogle} />\n    </div>\n  </div>\n  {#if counting}\n    <div transition:fade class=\"counter\">{counter}</div>\n  {/if}\n</div>\n\n<style>\n  :global(body) {\n    color: white;\n    background-color: #131313;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,\n      'Open Sans', 'Helvetica Neue', sans-serif;\n  }\n  :global(:root) {\n    font-size: 14px;\n  }\n  .vid {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n    /* background-color: green; */\n    z-index: -1;\n  }\n  .overlay {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n    z-index: 0;\n  }\n  .counter {\n    text-align: center;\n    font-size: 10rem;\n    line-height: 100%;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(48, 48, 48, 0.76);\n    position: absolute;\n    margin: auto;\n  }\n  .pannel {\n    background-color: rgba(37, 37, 37, 0.959);\n    padding: 2rem;\n    bottom: 0;\n    position: absolute;\n    margin: 2rem;\n    border-radius: 0.5rem;\n    overflow: hidden;\n  }\n  .pannel > div {\n    transition: max-height 0.7s ease;\n    max-height: 13rem;\n    overflow: hidden;\n  }\n  .pannel > .hidden {\n    max-height: 0px;\n    overflow: hidden;\n  }\n  video {\n    width: 100%;\n    height: 100%;\n  }\n  button {\n    padding: 0.7rem;\n    font-size: 1rem;\n    margin: 1rem;\n    border-radius: 0.5rem;\n    border: none;\n    background-color: rgb(214, 214, 214);\n    transition: background-color 0.3s ease;\n  }\n  button:hover {\n    background-color: rgb(141, 141, 141);\n  }\n  button:active {\n    background-color: rgb(75, 75, 75);\n  }\n</style>\n","// src/client/build/register.ts\nimport { Workbox, messageSW } from \"workbox-window\";\nvar autoUpdateMode = \"true\";\nvar auto = autoUpdateMode === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  let wb;\n  let registration;\n  const updateServiceWorker = async (reloadPage = true) => {\n    if (!auto) {\n      if (reloadPage) {\n        wb == null ? void 0 : wb.addEventListener(\"controlling\", (event) => {\n          if (event.isUpdate)\n            window.location.reload();\n        });\n      }\n      if (registration && registration.waiting) {\n        await messageSW(registration.waiting, { type: \"SKIP_WAITING\" });\n      }\n    }\n  };\n  if (\"serviceWorker\" in navigator) {\n    wb = new Workbox(\"/screen-recorder/sw.js\", { scope: \"/screen-recorder/\", type: \"classic\" });\n    wb.addEventListener(\"activated\", (event) => {\n      if (event.isUpdate)\n        auto && window.location.reload();\n      else\n        onOfflineReady == null ? void 0 : onOfflineReady();\n    });\n    if (!auto) {\n      const showSkipWaitingPrompt = () => {\n        onNeedRefresh == null ? void 0 : onNeedRefresh();\n      };\n      wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n      wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n    }\n    wb.register({ immediate }).then((r) => {\n      registration = r;\n      onRegistered == null ? void 0 : onRegistered(r);\n    }).catch((e) => {\n      onRegisterError == null ? void 0 : onRegisterError(e);\n    });\n  }\n  return updateServiceWorker;\n}\nexport {\n  registerSW\n};\n","export default async function () {\n  // if (!window.WritableStream) {\n  //   const pfill = await import('web-streams-polyfill/ponyfill/es2018');\n  //   for (const key in pfill) {\n  //     if (Object.prototype.hasOwnProperty.call(pfill, key)) {\n  //       (window as any)[key] = (pfill as any)[key];\n  //     }\n  //   }\n  // }\n}\n","import App from './App.svelte';\nimport { registerSW } from 'virtual:pwa-register';\nimport ponyfill from './ponyfill';\n\nregisterSW({\n  onNeedRefresh() {},\n  onOfflineReady() {},\n});\nconst mount = () => (window.app = new App({ target: window.document.body }));\n\nponyfill().then(mount);\n\ndeclare global {\n  interface Window {\n    /**\n     * App instance\n     */\n    app: App;\n  }\n}\n"],"names":["Workbox"],"mappings":"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"}